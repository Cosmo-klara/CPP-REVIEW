# Making & Using Objects ( 对象的创建与使用 )

> 实际上和对象没什么关系，不知道为什么章节名叫这个

## The process of language translation ( 语言的翻译过程 )

| 术语中文 | 术语英文 |
|:---:|:---:|
| 解释器 | interpreter |
| 编译器 | compiler |
| 连接器 | linker |
| 分段编译器 | segmented compilation |
| 库 | library |
| 预处理器 | preprocessor |
| 静态类型检查 | static type checking |


任何一种计算机语言都要从某种人们容易理解的形式（源代码）转化成计算机能执行的形式（机器指令）。通常，翻译器分为两类：interpreter和 compiler。

### Interpreter ( 解释器 )

解释器将源代码转化成一些动作（它可由多组机器指令组成）并立即执行这些动作。

使用解释器有许多好处：较好的交互性和适于快速程序开发（不必要求可执行程序）。从写代码到执行代码的转换几乎能立即完成，并且源代码总是现存的，所以一旦出现错误，解释器能很容易地指出。

然而，解释器（或其简化版）必须驻留内存以执行程序，而这样一来，即使是最快的解释器其速度也会变得让人难以接受。大部分的解释器要求一次输入整个源代码。这不仅造成内存空间的限制，而且如果语言不提供设施来隔离不同代码段之间的影响，一旦出现错误，就很难调试。

### Compiler ( 编译器 )

编译器直接把源代码转化成汇编语言或机器指令。最终的结果是一个或多个机器代码的文件。

仰仗编译器设计者的聪明才智，编译器生成的程序往往只需较少的运行空间，并且执行速度更快。虽然编译后的程序较小、运行速度快是人们认为应当使用编译器的理由，但在许多时候这却不是最重要的。某些语言（如 C 语言）可以分别编译各段程序。最后使用连接器（linker）把各段程序连接成一个完整的可执行程序。这个过程称为分段编译（separate compilation）

分段编译有许多好处。由于编译器或编译环境的限制，不能一次完成编译的整个程序，可以分段编译。每次创建和测试程序的一部分，当这部分程序能正常运行后，就把它作为程序组块保存起来。人们把测试通过并能正常运行的程序块收集起来加入库（library）中，供其他程序员使用。由于独立创建每一段程序，其他各段程序的复杂性便被隐藏起来。所有这些特点支持大型程序的创建。

为了提高编译速度，一些编译器采用了内存中编译（in-memory compilation）。大多数编译器，编译时每一步都要读写文件。内存中编译器就是将编译器程序存放在 RAM 中。对于小程序来说，内存中编译器几乎能和解释器一样响应。

### The compilation process ( 编译过程 )

在 C/C++ 编译时，首先要对源代码执行预处理。预处理器（preprocessor）是一个简单的程序，它用程序员（利用预处理器指令）定义好的模式代替源代码中的模式。预处理器指令用来节省输入，增加代码的可读性 ( C++ 程序设计并不鼓励多使用预处理指令，因为它可能会引起一些不易发现的错误), 预处理过的代码通常存放在一个中间文件中。

编译一般分两遍进行。首先，对预处理过的代码进行语法分析。编译器把源代码分解成小的单元并把它们按树形结构组织起来。表达式“A+B”中的“A”、“+”和“B”就是语法分析树的叶子节点。

类型检查（type checking）是编译器在第一遍中完成的。类型检查是检查函数参数是否正确使用，以防止许多程序设计错误。由于类型检查是在编译阶段而不是程序运行阶段进行的，所以称之为静态类型检查（static type checking）。

有时候会在编译的第一遍和第二遍之间使用全局优化器（global optimizer）来生成更短、更快的代码。

编译的第二遍，由代码生成器（code generator）遍历语法分析树，把树的每个节点转化成汇编语言或机器代码。如果代码生成器生成的是汇编语言，那么还必须用汇编器对其汇编。两种情况的最后结果都是生成目标模块（通常是，一个以 .o 或 .obj 为扩展名的文件）。有时也会在第二遍中使用窥孔优化器（peephole optimizer）从相邻一段代码中查找冗余汇编语句。

连接器（linker）把一组目标模块连接成为一个可执行程序，操作系统可以装载和运行它。当某个目标模块中的函数要引用另一目标模块中的函数或变量时，由连接器来处理这些引用；这就保证了所有需要的、在编译时存在的外部函数和变量仍然存在。连接器还要添加一个特殊的目标模块来完成程序启动任务。

连接器能搜索称为“库”的特殊文件来处理它的所有引用。库将一组目标模块包含在一个文件中。库由一个被称为库管理器（librarian）的程序来创建和维护。

## Tools for separate compilation ( 分段编译工具 )

| 术语中文 | 术语英文 |
|:---:|:---:|
| 参数 | argument |
| 声明 | declaration |
| 定义 | definition |

### Declaration and definition ( 声明与定义 )

声明是向编译器介绍名字—标识符。它告诉编译器“这个函数或这个变量在某处可找到，它的模样像什么”。而定义是说：“在这里建立变量”或“在这里建立函数”。它为名字分配存储空间。

> 无论定义的是函数还是变量，编译器都要为它们在定义点分配存储空间。对于变量，编译器确定变量的大小，然后在内存中开辟空间来保存变量的数据。对于函数，编译器会生成代码，这些代码最终也要占用一定的内存

#### 使用 **extern** 关键字表示变量是在文件以外定义的，或在文件后面部分才定义

```cpp
    // 声明
    extern int a, b;
    int max(int a, int b);
    // 定义
    int max(int a, int b)
    { 
        return a > b ? a : b; 
    }
    // 声明 & 定义
    int c;
```

### Including headers ( 包含头文件 )

使用 #include< > 导入头文件

### 其余部分略去，为 C++ 编程基础